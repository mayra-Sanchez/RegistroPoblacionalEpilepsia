<div class="info-container">
    <!-- Card: ¿Qué es RPE? -->
    <div class="card1">
        <div class="card-header">
            <i class="fas fa-brain icon"></i>
            <h2>¿Qué es RPE?</h2>
        </div>
        <div class="card-body">
            <p>
                El Registro Poblacional de Epilepsia (RPE) es una herramienta diseñada para recopilar, organizar y
                analizar
                datos relacionados con pacientes diagnosticados con epilepsia. Su objetivo es facilitar la
                investigación,
                mejorar el tratamiento y brindar información valiosa para la toma de decisiones en el ámbito de la salud
                pública.
            </p>
        </div>
    </div>

    <!-- Card: Instituciones -->
    <div class="card" (click)="animateCardClick($event); openModal('institucionesModal')">
        <div class="card-header">
            <i class="fas fa-university icon"></i>
            <h2>Instituciones</h2>
        </div>
        <div class="card-body">
            <p>
                Colaboramos con diversas instituciones de salud e investigación para mejorar la calidad de vida de los
                pacientes con epilepsia.
            </p>
            <div class="click-hint">
                <i class="fas fa-hand-pointer"></i> Haz clic para explorar
            </div>
        </div>
    </div>

    <!-- Card: Grupo Humano -->
    <div class="card" (click)="animateCardClick($event); openModal('grupoHumanoModal')">
        <div class="card-header">
            <i class="fas fa-users icon"></i>
            <h2>Grupo Humano</h2>
        </div>
        <div class="card-body">
            <p>
                Conoce al equipo detrás del RPE. Nuestro grupo humano está comprometido con la excelencia y la
                innovación en
                el tratamiento de la epilepsia.
            </p>
            <div class="click-hint">
                <i class="fas fa-hand-pointer"></i> Haz clic para conocer al equipo
            </div>
        </div>
    </div>
</div>

<!-- Modal para Instituciones -->
<div id="institucionesModal" class="modal">
    <div class="modal-content">
        <span class="close" (click)="closeModal('institucionesModal')">×</span>
        <h2>Instituciones Colaboradoras</h2>
        <p class="modal-subtitle">Haz clic en una institución para ver más detalles</p>

        <div class="instituciones-container">
            <div class="institucion" data-cta="Ver detalles" *ngFor="let institucion of instituciones"
                (click)="openInstitucionModal(institucion)">
                <img [src]="institucion.imagen" [alt]="institucion.nombre" class="institucion-img">
                <h3 class="institucion-nombre">{{institucion.nombre}}</h3>
                <p class="institucion-descripcion">{{institucion.tipo}}</p>
            </div>
        </div>
    </div>
</div>

<!-- Modal para detalles de institución -->
<div id="institucionDetailModal" class="modal" *ngIf="institucionSeleccionada">
    <div class="modal-content-institucion">

        <div class="institucion-header">
            <span class="close-institucion-detalle" (click)="closeModal('institucionDetailModal')">×</span>
            <img [src]="institucionSeleccionada.imagen" [alt]="institucionSeleccionada.nombre"
                class="institucion-logo-modal">
            <div class="institucion-titulo">
                <h2>{{institucionSeleccionada.nombre}}</h2>
                <p class="institucion-tipo">{{institucionSeleccionada.tipo}}</p>
            </div>
        </div>

        <div class="institucion-content">
            <div class="institucion-info">
                <div class="institucion-descripcion">
                    <h3>Descripción</h3>
                    <p>{{institucionSeleccionada.descripcionCompleta}}</p>
                </div>

                <div class="institucion-detalles">
                    <h3>Información Adicional</h3>
                    <div class="detalle-item">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>{{institucionSeleccionada.direccion}}</span>
                    </div>
                    <div class="detalle-item">
                        <i class="fas fa-phone"></i>
                        <span>{{institucionSeleccionada.telefono}}</span>
                    </div>
                    <div class="detalle-item">
                        <i class="fas fa-globe"></i>
                        <a [href]="institucionSeleccionada.sitioWeb"
                            target="_blank">{{institucionSeleccionada.sitioWeb}}</a>
                    </div>
                </div>
            </div>

            <div class="institucion-mapa">
                <h3>Ubicación</h3>
                <div id="mapContainer" class="map-container"></div>
                <small>Coordenadas: {{institucionSeleccionada.coordenadas.lat | number:'1.4-4'}},
                    {{institucionSeleccionada.coordenadas.lng | number:'1.4-4'}}</small>
            </div>
        </div>
    </div>
</div>

<!-- Modal Grupo Humano -->
<div id="grupoHumanoModal" class="modal">
    <div class="modal-content">
        <span class="close" (click)="closeModal('grupoHumanoModal')">×</span>
        <h2>Nuestro Equipo</h2>
        <p class="modal-subtitle">Conoce a los miembros de nuestro equipo</p>

        <div class="personas-container">
            <div class="persona" data-cta="Ver perfil" (click)="openPersonaModal('patricia')">
                <img src="../../assets/directores_estudiantes/paty.png" alt="Maria Patricia Trujillo Uribe"
                    class="persona-img">
                <h3 class="persona-nombre">Maria Patricia Trujillo Uribe</h3>
                <p class="persona-rol">Directora</p>
                <span class="persona-cta">Ver perfil</span>
            </div>

            <!-- Persona 2: Director -->
            <div class="persona" data-cta="Ver perfil" (click)="openPersonaModal('deisy')">
                <img src="../../assets/directores_estudiantes/deisy.jpg" alt="Director 2" class="persona-img" />
                <h3 class="persona-nombre">Deisy Chaves Sánchez</h3>
                <p class="persona-rol">Directora</p>
            </div>

            <!-- Persona 3: Director -->
            <div class="persona" data-cta="Ver perfil" (click)="openPersonaModal('jhon')">
                <img src="../../assets/directores_estudiantes/jhonma.jpg" alt="Director 3" class="persona-img" />
                <h3 class="persona-nombre">Jhon Mauro Gómez Benitez</h3>
                <p class="persona-rol">Director</p>
            </div>

            <!-- Persona 4: Director -->
            <div class="persona" data-cta="Ver perfil" (click)="openPersonaModal('alejandro')">
                <img src="../../assets/directores_estudiantes/Alejandro_Herrera_Trujillo.png" alt="Director 4"
                    class="persona-img" />
                <h3 class="persona-nombre">Alejandro Herrera Trujillo</h3>
                <p class="persona-rol">Director</p>
            </div>
        </div>
        <div class="personas-container-centrado">
            <!-- Persona 5: Director -->
            <div class="persona" data-cta="Ver perfil" (click)="openPersonaModal('juan')">
                <img src="../../assets/directores_estudiantes/Rivas.jpg" alt="Director 5" class="persona-img" />
                <h3 class="persona-nombre">Juan Carlos Rivas Nieto</h3>
                <p class="persona-rol">Director</p>
            </div>

            <!-- Persona 6: Estudiante -->
            <div class="persona" data-cta="Ver perfil" (click)="openPersonaModal('mayra')">
                <img src="../../assets/directores_estudiantes/may.jpg" alt="Estudiante 1" class="persona-img" />
                <h3 class="persona-nombre">Mayra Alejandra Sánchez Salinas</h3>
                <p class="persona-rol">Estudiante</p>
            </div>

            <!-- Persona 7: Estudiante -->
            <div class="persona" data-cta="Ver perfil" (click)="openPersonaModal('laura')">
                <img src="../../assets/directores_estudiantes/laura.jpg" alt="Estudiante 2" class="persona-img" />
                <h3 class="persona-nombre">Laura Daniela Jaimes Cardenas</h3>
                <p class="persona-rol">Estudiante</p>
            </div>
        </div>
    </div>
</div>

<!-- Modal único reutilizable -->
<div id="personaDetailModal" class="modal" *ngIf="personaSeleccionada">
    <div class="modal-content-persona-detalle">

        <div class="persona-detalle-container">
            <!-- Encabezado -->
            <div class="persona-detalle-header">
                <span class="close-persona-detalle" (click)="closeModal('personaDetailModal')">×</span>
                <div class="persona-icono">
                    <img [src]="personaSeleccionada.imagen" alt="Foto de {{personaSeleccionada.nombre}}"
                        class="persona-imagen-detalle" *ngIf="personaSeleccionada.imagen">
                </div>
                <div class="persona-detalle-info-basica">
                    <h2 class="persona-nombre-detalle">{{personaSeleccionada.nombre}}</h2>
                    <p class="persona-rol-detalle">{{personaSeleccionada.rol}}</p>
                    <div class="persona-etiquetas">
                        <span class="etiqueta"
                            *ngFor="let etiqueta of personaSeleccionada.etiquetas">{{etiqueta}}</span>
                    </div>
                </div>
            </div>

            <div class="persona-detalle-content">
                <!-- Sección de Biografía -->
                <div class="persona-detalle-section">
                    <div class="section-header">
                        <i class="fas fa-book-open"></i>
                        <h3>Biografía Profesional</h3>
                    </div>
                    <p class="persona-descripcion-detalle">
                        {{personaSeleccionada.biografia}}
                    </p>
                </div>

                <!-- Sección de Formación -->
                <div class="persona-detalle-section">
                    <div class="section-header">
                        <i class="fas fa-user-graduate"></i>
                        <h3>Formación Académica</h3>
                    </div>
                    <ul class="persona-formacion">
                        <li *ngFor="let item of personaSeleccionada.formacion">{{item}}</li>
                    </ul>
                </div>

                <!-- Sección de Contacto -->
                <div class="persona-detalle-section">
                    <div class="section-header">
                        <i class="fas fa-envelope"></i>
                        <h3>Contacto</h3>
                    </div>
                    <div class="persona-contacto">
                        <p><i class="fas fa-envelope"></i> {{personaSeleccionada.contacto.email}}</p>
                        <p><i class="fas fa-building"></i> {{personaSeleccionada.contacto.oficina}}</p>
                    </div>
                </div>

                <!-- Sección de Proyectos -->
                <div class="persona-detalle-section">
                    <div class="section-header">
                        <i class="fas fa-project-diagram"></i>
                        <h3>Proyectos Destacados</h3>
                    </div>
                    <ul class="persona-proyectos">
                        <li *ngFor="let proyecto of personaSeleccionada.proyectos">{{proyecto}}</li>
                    </ul>
                </div>

                <!-- Sección de Redes Sociales -->
                <div class="persona-detalle-section redes-sociales-section" *ngIf="personaSeleccionada.redesSociales">
                    <div class="section-header">
                        <i class="fas fa-share-alt"></i>
                        <h3>Redes Sociales</h3>
                    </div>
                    <div class="redes-sociales-container">
                        <a *ngIf="personaSeleccionada.redesSociales.linkedin"
                            [href]="personaSeleccionada.redesSociales.linkedin" class="red-social-link" target="_blank"
                            title="LinkedIn">
                            <i class="fab fa-linkedin-in"></i>
                        </a>
                        <a *ngIf="personaSeleccionada.redesSociales.researchgate"
                            [href]="personaSeleccionada.redesSociales.researchgate" class="red-social-link"
                            target="_blank" title="ResearchGate">
                            <i class="fab fa-researchgate"></i>
                        </a>
                        <a *ngIf="personaSeleccionada.redesSociales.scholar"
                            [href]="personaSeleccionada.redesSociales.scholar" class="red-social-link" target="_blank"
                            title="Google Scholar">
                            <i class="fas fa-graduation-cap"></i>
                        </a>
                        <a *ngIf="personaSeleccionada.redesSociales.twitter"
                            [href]="personaSeleccionada.redesSociales.twitter" class="red-social-link" target="_blank"
                            title="Twitter">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a *ngIf="personaSeleccionada.redesSociales.facebook"
                            [href]="personaSeleccionada.redesSociales.facebook" class="red-social-link" target="_blank"
                            title="Facebook">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a *ngIf="personaSeleccionada.redesSociales.instagram"
                            [href]="personaSeleccionada.redesSociales.instagram" class="red-social-link" target="_blank"
                            title="Instagram">
                            <i class="fab fa-instagram"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>