<div class="home">
  <app-navbar (tabSelected)="onTabSelected($event)"></app-navbar>

  <div class="contentHome">
    <div *ngIf="selectedTab === 'inicio'" class="info-container">
      <!-- Card: ¿Qué es RPE? -->
      <div class="card1">
        <div class="card-header">
          <i class="fas fa-brain icon"></i> <!-- Icono alusivo -->
          <h2>¿Qué es RPE?</h2>
        </div>
        <div class="card-body">
          <p>
            El Registro Poblacional de Epilepsia (RPE) es una herramienta diseñada para recopilar, organizar y analizar
            datos relacionados con pacientes diagnosticados con epilepsia. Su objetivo es facilitar la investigación,
            mejorar el tratamiento y brindar información valiosa para la toma de decisiones en el ámbito de la salud
            pública
          </p>
        </div>
      </div>

      <!-- Card: Instituciones -->
      <div class="card" (click)="openModal('institucionesModal')">
        <div class="card-header">
          <i class="fas fa-university icon"></i> <!-- Icono para instituciones -->
          <h2>Instituciones</h2>
        </div>
        <div class="card-body">
          <p>
            Colaboramos con diversas instituciones de salud e investigación para mejorar la calidad de vida de los
            pacientes con epilepsia
          </p>
          <p class="text-footer">Ver más...</p>
        </div>
      </div>

      <!-- Card: Grupo Humano -->
      <div class="card" (click)="openModal('grupoHumanoModal')">
        <div class="card-header">
          <i class="fas fa-users icon"></i> <!-- Icono para grupo humano -->
          <h2>Grupo Humano</h2>
        </div>
        <div class="card-body">
          <p>
            Conoce al equipo detrás del RPE. Nuestro grupo humano está comprometido con la excelencia y la innovación en
            el tratamiento de la epilepsia
          </p>
          <p class="text-footer">Ver más...</p>
        </div>
      </div>
    </div>


    <div *ngIf="selectedTab === 'sistema'" class="container">
      <div class="card-sistema">
        <div class="card-content-sistema">
          <div class="image-left-sistema">
            <img src="../../assets/Ejemplos-de-sistemas-de-informacion.jpg" alt="Ejemplos de sistemas de información" />
            <p class="image-credit">Crédito: https://www.getxplor.com/blog/ejemplos-de-sistemas-de-informacion/</p>
          </div>
          <div class="text-right-sistema">
            <h2 class="card-title-sistema">¿Qué es un sistema de información?</h2>
            <p class="card-description-sistema">Un sistema de información es un conjunto ordenado de personas, procesos
              y herramientas cuyo fin es administrar datos e información, de manera que puedan ser recuperados y
              procesados fácil y rápidamente</p>
            <p class="card-description-sistema">Todo sistema de información se compone de una serie de recursos
              interconectados y en interacción, bien organizados y dispuestos del modo más conveniente en relación con
              un propósito informativo determinado, que puede ser recabar información personal, procesar estadísticas,
              organizar archivos, entre otros</p>
            <p class="card-description-sistema">Los sistemas de información pueden presentar diferencias, pero
              generalmente recolectan y clasifican datos, que son procesados por personas y/o con recursos informáticos,
              para que sean fáciles de comprender y recuperar. Así, esta información queda almacenada para ser
              consultada de manera sencilla o para ser divulgada cuando sea necesario</p>

          </div>
        </div>
      </div>
    </div>

    <div *ngIf="selectedTab === 'contacto'" class="contact-container">
      <div class="contact-wrapper">
        <!-- Card de Instrucciones -->
        <div class="contact-card instruction-card">
          <div class="card-icon">
            <i class="fas fa-file-alt"></i>
          </div>
          <h2>Registro en el Sistema</h2>
          <p>Para registrarse en nuestra plataforma, por favor haga clic en el botón:</p>

          <button class="register-btn" (click)="openRegistrationModal()">
            <i class="fas fa-user-plus"></i>
            Solicitar Registro
          </button>

          <div class="note-box">
            <i class="fas fa-info-circle"></i>
            <p>Por seguridad, todos los registros son verificados manualmente por nuestro equipo.</p>
          </div>
        </div>

        <!-- Card de Información de Contacto -->
        <div class="contact-card info-card">
          <div class="card-icon">
            <i class="fas fa-envelope-open-text"></i>
          </div>
          <h2>Contacto Directo</h2>

          <div class="contact-method">
            <i class="fas fa-map-marker-alt"></i>
            <div>
              <h3>Oficina Principal</h3>
              <p>Calle 13 # 100-00<br>Cali, Valle Del Cauca</p>
              <p>Edificion B13 - Laboratorio MVC</p>
            </div>
          </div>

          <div class="contact-method">
            <i class="fas fa-phone-alt"></i>
            <div>
              <h3>Teléfonos</h3>
              <p>+57 302 6929375<br>+57 305 3934905</p>
            </div>
          </div>

          <div class="contact-method">
            <i class="fas fa-at"></i>
            <div>
              <h3>Correos Electrónicos</h3>
              <p>Soporte: <strong>correo</strong><br>
                Registros: <strong>correo</strong></p>
            </div>
          </div>

          <div class="contact-method">
            <i class="fas fa-business-time"></i>
            <div>
              <h3>Horario de Atención</h3>
              <p>Lunes a Viernes: 8:00 - 18:00 hrs<br>
                Sábados: 9:00 - 13:00 hrs</p>
            </div>
          </div>

          <div class="social-media">
            <h3>Síguenos en:</h3>
            <div class="social-icons">
              <a href="#" aria-label="Facebook">
                <i class="fab fa-facebook-f"></i>
              </a>
              <a href="#" aria-label="Twitter">
                <i class="fab fa-twitter"></i>
              </a>
              <a href="#" aria-label="LinkedIn">
                <i class="fab fa-linkedin-in"></i>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal para Instituciones -->
  <div id="institucionesModal" class="modal">
    <div class="modal-content">
      <span class="close" (click)="closeModal('institucionesModal')">&times;</span>
      <h2>Instituciones Colaboradoras</h2>
      <p>Trabajamos en conjunto con las siguientes instituciones y laboratorios:</p>

      <div class="instituciones-container">
        <div class="institucion" *ngFor="let institucion of instituciones" (click)="openInstitucionModal(institucion)">
          <img [src]="institucion.imagen" [alt]="institucion.nombre" class="institucion-img">
          <h3 class="institucion-nombre">{{institucion.nombre}}</h3>
          <p class="institucion-descripcion">{{institucion.descripcionCorta}}</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal para detalles de institución -->
  <div id="institucionDetailModal" class="modal" *ngIf="institucionSeleccionada">
    <div class="modal-content-institucion">

      <div class="institucion-header">
        <span class="close-institucion-detalle" (click)="closeModal('institucionDetailModal')">&times;</span>
        <img [src]="institucionSeleccionada.imagen" [alt]="institucionSeleccionada.nombre"
          class="institucion-logo-modal">
        <div class="institucion-titulo">
          <h2>{{institucionSeleccionada.nombre}}</h2>
          <p class="institucion-tipo">{{institucionSeleccionada.tipo}}</p>
        </div>
      </div>

      <div class="institucion-content">
        <div class="institucion-info">
          <div class="institucion-descripcion">
            <h3>Descripción</h3>
            <p>{{institucionSeleccionada.descripcionCompleta}}</p>
          </div>

          <div class="institucion-detalles">
            <h3>Información Adicional</h3>
            <div class="detalle-item">
              <i class="fas fa-map-marker-alt"></i>
              <span>{{institucionSeleccionada.direccion}}</span>
            </div>
            <div class="detalle-item">
              <i class="fas fa-phone"></i>
              <span>{{institucionSeleccionada.telefono}}</span>
            </div>
            <div class="detalle-item">
              <i class="fas fa-globe"></i>
              <a [href]="institucionSeleccionada.sitioWeb" target="_blank">{{institucionSeleccionada.sitioWeb}}</a>
            </div>
          </div>
        </div>

        <div class="institucion-mapa">
          <h3>Ubicación</h3>
          <div id="mapContainer" class="map-container"></div>
          <small>Coordenadas: {{institucionSeleccionada.coordenadas.lat | number:'1.4-4'}},
            {{institucionSeleccionada.coordenadas.lng | number:'1.4-4'}}</small>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal para Grupo Humano -->
  <div id="grupoHumanoModal" class="modal">
    <div class="modal-content">
      <span class="close" (click)="closeModal('grupoHumanoModal')">&times;</span>
      <h2>Grupo Humano</h2>
      <p>Para conocer más al detalle a las personas del grupo humano, dale clic a su nombre</p>
      <!-- Contenedor de personas -->
      <div class="personas-container">
        <!-- Persona 1: Director -->
        <div class="persona" (click)="openPersonaModal('patricia')">
          <img src="../../assets/directores_estudiantes/paty.png" alt="Director 1" class="persona-img" />
          <h3 class="persona-nombre">Maria Patricia Trujillo Uribe</h3>
          <p class="persona-rol">Directora</p>
          <!-- <p class="persona-descripcion">
          Breve descripción del director 1 y su contribución al proyecto.
        </p> -->
        </div>

        <!-- Persona 2: Director -->
        <div class="persona" (click)="openPersonaModal('deisy')">
          <img src="../../assets/directores_estudiantes/deisy.jpg" alt="Director 2" class="persona-img" />
          <h3 class="persona-nombre">Deisy Chaves Sánchez</h3>
          <p class="persona-rol">Directora</p>
          <!-- <p class="persona-descripcion">
          Breve descripción del director 2 y su contribución al proyecto.
        </p> -->
        </div>

        <!-- Persona 3: Director -->
        <div class="persona" (click)="openPersonaModal('jhon')">
          <img src="../../assets/directores_estudiantes/jhonma.jpg" alt="Director 3" class="persona-img" />
          <h3 class="persona-nombre">Jhon Mauro Gómez Benitez</h3>
          <p class="persona-rol">Director</p>
          <!-- <p class="persona-descripcion">
          Breve descripción del director 3 y su contribución al proyecto.
        </p> -->
        </div>

        <!-- Persona 4: Director -->
        <div class="persona" (click)="openPersonaModal('alejandro')">
          <img src="../../assets/directores_estudiantes/Alejandro_Herrera_Trujillo.png" alt="Director 4"
            class="persona-img" />
          <h3 class="persona-nombre">Alejandro Herrera Trujillo</h3>
          <p class="persona-rol">Director</p>
          <!-- <p class="persona-descripcion">
          Breve descripción del director 4 y su contribución al proyecto.
        </p> -->
        </div>

      </div>
      <div class="personas-container-centrado">
        <div class="persona" (click)="openPersonaModal('juan')">
          <img src="../../assets/directores_estudiantes/Rivas.jpg" alt="Director 5" class="persona-img" />
          <h3 class="persona-nombre">Juan Carlos Rivas Nieto</h3>
          <p class="persona-rol">Director</p>
          <!-- <p class="persona-descripcion">
          Breve descripción del director 5 y su contribución al proyecto.
        </p> -->
        </div>

        <!-- Persona 6: Estudiante -->
        <div class="persona" (click)="openPersonaModal('mayra')">
          <img src="../../assets/directores_estudiantes/may.jpg" alt="Estudiante 1" class="persona-img" />
          <h3 class="persona-nombre">Mayra Alejandra Sánchez Salinas</h3>
          <p class="persona-rol">Estudiante</p>
          <!-- <p class="persona-descripcion">
          Breve descripción del estudiante 1 y su contribución al proyecto.
        </p> -->
        </div>

        <!-- Persona 7: Estudiante -->
        <div class="persona" (click)="openPersonaModal('laura')">
          <img src="../../assets/directores_estudiantes/laura.jpg" alt="Estudiante 2" class="persona-img" />
          <h3 class="persona-nombre">Laura Daniela Jaimes Cardenas</h3>
          <p class="persona-rol">Estudiante</p>
          <!-- <p class="persona-descripcion">
          Breve descripción del estudiante 2 y su contribución al proyecto.
        </p> -->
        </div>
      </div>
    </div>
  </div>

  <!-- Modal único reutilizable -->
  <div id="personaDetailModal" class="modal" *ngIf="personaSeleccionada">
    <div class="modal-content-persona-detalle">

      <div class="persona-detalle-container">
        <!-- Encabezado -->
        <div class="persona-detalle-header">
          <span class="close-persona-detalle" (click)="closeModal('personaDetailModal')">&times;</span>
          <div class="persona-icono">
            <img [src]="personaSeleccionada.imagen" alt="Foto de {{personaSeleccionada.nombre}}"
              class="persona-imagen-detalle" *ngIf="personaSeleccionada.imagen">
          </div>
          <div class="persona-detalle-info-basica">
            <h2 class="persona-nombre-detalle">{{personaSeleccionada.nombre}}</h2>
            <p class="persona-rol-detalle">{{personaSeleccionada.rol}}</p>
            <div class="persona-etiquetas">
              <span class="etiqueta" *ngFor="let etiqueta of personaSeleccionada.etiquetas">{{etiqueta}}</span>
            </div>
          </div>
        </div>

        <div class="persona-detalle-content">
          <!-- Sección de Biografía -->
          <div class="persona-detalle-section">
            <div class="section-header">
              <i class="fas fa-book-open"></i>
              <h3>Biografía Profesional</h3>
            </div>
            <p class="persona-descripcion-detalle">
              {{personaSeleccionada.biografia}}
            </p>
          </div>

          <!-- Sección de Formación -->
          <div class="persona-detalle-section">
            <div class="section-header">
              <i class="fas fa-user-graduate"></i>
              <h3>Formación Académica</h3>
            </div>
            <ul class="persona-formacion">
              <li *ngFor="let item of personaSeleccionada.formacion">{{item}}</li>
            </ul>
          </div>

          <!-- Sección de Contacto -->
          <div class="persona-detalle-section">
            <div class="section-header">
              <i class="fas fa-envelope"></i>
              <h3>Contacto</h3>
            </div>
            <div class="persona-contacto">
              <p><i class="fas fa-envelope"></i> {{personaSeleccionada.contacto.email}}</p>
              <p><i class="fas fa-building"></i> {{personaSeleccionada.contacto.oficina}}</p>
            </div>
          </div>

          <!-- Sección de Proyectos -->
          <div class="persona-detalle-section">
            <div class="section-header">
              <i class="fas fa-project-diagram"></i>
              <h3>Proyectos Destacados</h3>
            </div>
            <ul class="persona-proyectos">
              <li *ngFor="let proyecto of personaSeleccionada.proyectos">{{proyecto}}</li>
            </ul>
          </div>

          <!-- Sección de Redes Sociales -->
          <div class="persona-detalle-section redes-sociales-section" *ngIf="personaSeleccionada.redesSociales">
            <div class="section-header">
              <i class="fas fa-share-alt"></i>
              <h3>Redes Sociales</h3>
            </div>
            <div class="redes-sociales-container">
              <a *ngIf="personaSeleccionada.redesSociales.linkedin" [href]="personaSeleccionada.redesSociales.linkedin"
                class="red-social-link" target="_blank" title="LinkedIn">
                <i class="fab fa-linkedin-in"></i>
              </a>
              <a *ngIf="personaSeleccionada.redesSociales.researchgate"
                [href]="personaSeleccionada.redesSociales.researchgate" class="red-social-link" target="_blank"
                title="ResearchGate">
                <i class="fab fa-researchgate"></i>
              </a>
              <a *ngIf="personaSeleccionada.redesSociales.scholar" [href]="personaSeleccionada.redesSociales.scholar"
                class="red-social-link" target="_blank" title="Google Scholar">
                <i class="fas fa-graduation-cap"></i>
              </a>
              <a *ngIf="personaSeleccionada.redesSociales.twitter" [href]="personaSeleccionada.redesSociales.twitter"
                class="red-social-link" target="_blank" title="Twitter">
                <i class="fab fa-twitter"></i>
              </a>
              <a *ngIf="personaSeleccionada.redesSociales.facebook" [href]="personaSeleccionada.redesSociales.facebook"
                class="red-social-link" target="_blank" title="Facebook">
                <i class="fab fa-facebook-f"></i>
              </a>
              <a *ngIf="personaSeleccionada.redesSociales.instagram"
                [href]="personaSeleccionada.redesSociales.instagram" class="red-social-link" target="_blank"
                title="Instagram">
                <i class="fab fa-instagram"></i>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="registrationModal" class="modal">
    <div class="modal-content registration-modal">
      <span class="close" (click)="closeModal('registrationModal')">&times;</span>

      <div *ngIf="!showSuccessMessage; else successTemplate">
        <h2>Solicitud de Registro</h2>

        <form [formGroup]="registrationForm" (ngSubmit)="submitRegistration()" *ngIf="!isSending; else sendingTemplate">
          <div class="form-row">
            <div class="form-group">
              <label for="nombre">Nombre*</label>
              <input type="text" id="nombre" formControlName="nombre" placeholder="Ingrese su nombre">
              <div *ngIf="registrationForm.get('nombre')?.invalid && registrationForm.get('nombre')?.touched"
                class="error-message">
                Nombre es requerido
              </div>
            </div>

            <div class="form-group">
              <label for="apellido">Apellido*</label>
              <input type="text" id="apellido" formControlName="apellido" placeholder="Ingrese su apellido">
              <div *ngIf="registrationForm.get('apellido')?.invalid && registrationForm.get('apellido')?.touched"
                class="error-message">
                Apellido es requerido
              </div>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="tipoDocumento">Tipo de Documento*</label>
              <select id="tipoDocumento" formControlName="tipoDocumento">
                <option value="" disabled selected>Seleccione...</option>
                <option value="CC">Cédula de Ciudadanía</option>
                <option value="CE">Cédula de Extranjería</option>
                <option value="PA">Pasaporte</option>
                <option value="TI">Tarjeta de Identidad</option>
              </select>
              <div
                *ngIf="registrationForm.get('tipoDocumento')?.invalid && registrationForm.get('tipoDocumento')?.touched"
                class="error-message">
                Tipo de documento es requerido
              </div>
            </div>

            <div class="form-group">
              <label for="numeroDocumento">Número de Documento*</label>
              <input type="text" id="numeroDocumento" formControlName="numeroDocumento"
                placeholder="Ingrese su número de documento">
              <div
                *ngIf="registrationForm.get('numeroDocumento')?.invalid && registrationForm.get('numeroDocumento')?.touched"
                class="error-message">
                Número de documento es requerido y debe ser numérico
              </div>
            </div>
          </div>

          <div class="form-group">
            <label for="fechaNacimiento">Fecha de Nacimiento*</label>
            <input type="date" id="fechaNacimiento" formControlName="fechaNacimiento">
            <div
              *ngIf="registrationForm.get('fechaNacimiento')?.invalid && registrationForm.get('fechaNacimiento')?.touched"
              class="error-message">
              Fecha de nacimiento es requerida
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="rol">Rol en el Sistema*</label>
              <select id="rol" formControlName="rol">
                <option value="" disabled selected>Seleccione su rol...</option>
                <option value="investigador">Investigador</option>
                <option value="doctor">Doctor</option>
                <option value="administrador">Administrador</option>
              </select>
              <div *ngIf="registrationForm.get('rol')?.invalid && registrationForm.get('rol')?.touched"
                class="error-message">
                Rol es requerido
              </div>
            </div>

            <div class="form-group">
              <label for="capaInvestigacion">Capa de Investigación*</label>
                <input type="text" id="capaInvestigacion" formControlName="capaInvestigacion"
                placeholder="Ingrese el nombre de la capa a la que desea registrarse">
              <div
                *ngIf="registrationForm.get('capaInvestigacion')?.invalid && registrationForm.get('capaInvestigacion')?.touched"
                class="error-message">
                Capa de investigación es requerida
              </div>
            </div>
          </div>

          <div class="form-group">
            <label for="email">Correo Electrónico*</label>
            <input type="email" id="email" formControlName="email" placeholder="Ingrese su correo electrónico">
            <div *ngIf="registrationForm.get('email')?.invalid && registrationForm.get('email')?.touched"
              class="error-message">
              Correo electrónico válido es requerido
            </div>
          </div>

          <div class="form-group">
            <label for="password">Contraseña*</label>
            <input type="password" id="password" formControlName="password" placeholder="Mínimo 6 caracteres">
            <div *ngIf="registrationForm.get('password')?.invalid && registrationForm.get('password')?.touched"
              class="error-message">
              Contraseña debe tener al menos 6 caracteres
            </div>
          </div>

          <div class="form-group">
            <label for="responsable">Nombre del Responsable*</label>
            <input type="text" id="responsable" formControlName="responsable"
              placeholder="Persona que autoriza su registro">
            <div *ngIf="registrationForm.get('responsable')?.invalid && registrationForm.get('responsable')?.touched"
              class="error-message">
              Nombre del responsable es requerido
            </div>
          </div>

          <div class="form-actions">
            <button type="button" class="cancel-btn" (click)="closeModal('registrationModal')">Cancelar</button>
            <button type="submit" class="submit-btn" [disabled]="!registrationForm.valid">
              <i class="fas fa-paper-plane"></i> Enviar Solicitud
            </button>
          </div>
        </form>
      </div>

      <ng-template #sendingTemplate>
        <div class="sending-container">
          <div class="spinner"></div>
          <p>Enviando solicitud de registro...</p>
          <p>Por favor espere un momento.</p>
        </div>
      </ng-template>

      <ng-template #successTemplate>
        <div class="success-container">
          <div class="success-icon">
            <i class="fas fa-check-circle"></i>
          </div>
          <h2>Solicitud Enviada Exitosamente</h2>
          <p>Hemos recibido tu solicitud de registro correctamente.</p>
          <p>El equipo administrativo revisará tu información y te notificará por correo electrónico una vez procesada.
          </p>
          <button class="close-btn" (click)="closeModal('registrationModal')">Cerrar</button>
        </div>
      </ng-template>
    </div>
  </div>