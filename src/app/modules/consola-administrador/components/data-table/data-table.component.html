<div class="table-wrapper">
  <!-- Controles Superiores -->
  <div class="table-header">
    <div class="controls-left">
      <div class="page-size-selector">
        <label>Mostrar:</label>
        <select [(ngModel)]="itemsPerPage" (change)="changePageSize(itemsPerPage)">
          <option *ngFor="let option of itemsPerPageOptions" [value]="option">
            {{ option }}
          </option>
        </select>
      </div>
    </div>

    <div class="controls-right">
      <div class="search-box">
        <input 
          type="text" 
          [(ngModel)]="searchQuery" 
          (input)="filterData()" 
          placeholder="Buscar en la tabla..."
          class="search-input"
        >
        <i class="fas fa-search search-icon"></i>
      </div>
    </div>
  </div>

  <!-- Tabla -->
<div class="table-container">
  <!-- üîπ Descripci√≥n de la tabla -->
  <p id="tableDescription" class="table-description">
    Esta tabla muestra los registros disponibles con opciones para ver detalles o eliminar cada elemento. 
    Incluye controles de b√∫squeda, filtrado y paginaci√≥n para facilitar la navegaci√≥n.
  </p>

  <table class="data-table" aria-describedby="tableDescription">
    <thead>
      <tr>
        <th *ngFor="let col of columns" class="table-header-cell">
          {{ col.header }}
        </th>
        <th class="actions-header">Acciones</th>
      </tr>
    </thead>
    
    <tbody>
      <!-- Estado de carga -->
      <tr *ngIf="loading">
        <td [colSpan]="columns.length + 1" class="loading-cell">
          <div class="loading-content">
            <i class="fas fa-spinner fa-spin"></i>
            <span>Cargando datos...</span>
          </div>
        </td>
      </tr>

      <!-- Datos -->
      <tr *ngFor="let item of data; trackBy: trackByFn" class="table-row">
        <td *ngFor="let col of columns" class="table-cell">
          <span class="cell-content">{{ getCellValue(item, col) }}</span>
        </td>
        <td class="actions-cell">
          <div class="action-buttons">
            <button class="btn-action btn-view" (click)="viewItem(item)" title="Ver detalles">
              <i class="fas fa-eye"></i>
            </button>
            <button class="btn-action btn-delete" (click)="deleteItem(item)" title="Eliminar">
              <i class="fas fa-trash"></i>
            </button>
          </div>
        </td>
      </tr>

      <!-- Sin datos -->
      <tr *ngIf="!loading && data.length === 0">
        <td [colSpan]="columns.length + 1" class="empty-cell">
          <div class="empty-content">
            <i class="fas fa-inbox"></i>
            <span>
              {{ searchQuery ? 'No se encontraron resultados' : 'No hay datos disponibles' }}
            </span>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>


  <!-- Pie de tabla con informaci√≥n y paginaci√≥n -->
  <div class="table-footer" *ngIf="!loading && totalPages > 1">
    <div class="pagination-info">
      <!-- ‚úÖ Usando el m√©todo getDisplayRange() -->
      Mostrando {{ getDisplayRange() }} registros
    </div>
    
    <!-- Paginaci√≥n -->
    <div class="pagination-controls">
      <button 
        class="pagination-btn" 
        (click)="goToPage(1)" 
        [disabled]="currentPage === 1"
        title="Primera p√°gina"
      >
        <i class="fas fa-angle-double-left"></i>
      </button>
      
      <button 
        class="pagination-btn" 
        (click)="goToPage(currentPage - 1)" 
        [disabled]="currentPage === 1"
        title="P√°gina anterior"
      >
        <i class="fas fa-angle-left"></i>
      </button>

      <span class="page-indicator">
        P√°gina {{ currentPage }} de {{ totalPages }}
      </span>

      <button 
        class="pagination-btn" 
        (click)="goToPage(currentPage + 1)" 
        [disabled]="currentPage === totalPages"
        title="P√°gina siguiente"
      >
        <i class="fas fa-angle-right"></i>
      </button>
      
      <button 
        class="pagination-btn" 
        (click)="goToPage(totalPages)" 
        [disabled]="currentPage === totalPages"
        title="√öltima p√°gina"
      >
        <i class="fas fa-angle-double-right"></i>
      </button>
    </div>
  </div>
</div>