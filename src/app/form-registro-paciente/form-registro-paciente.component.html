<div class="user-form-container">
    <form [formGroup]="formPaciente" (ngSubmit)="onRegister()">
        <div class="form-row">
            <div class="form-group">
                <label for="name">Nombre Completo</label>
                <input type="text" id="name" formControlName="name" placeholder="Nombre completo" />
                <small *ngIf="formPaciente.get('name')?.touched && formPaciente.get('name')?.invalid">
                    Este campo es obligatorio.
                </small>
            </div>

            <div class="form-group">
                <label for="identificationType">Tipo de Documento</label>
                <select formControlName="identificationType" id="identificationType">
                    <option value="" disabled selected>Seleccione un tipo de documento</option>
                    <option value="cc">Cédula de Ciudadanía</option>
                    <option value="ti">Tarjeta de Identidad</option>
                    <option value="ce">Cédula de Extranjería</option>
                    <option value="pa">Pasaporte</option>
                    <option value="rc">Registro Civil</option>
                    <option value="pep">Permiso Especial de Permanencia</option>
                    <option value="nit">Número de Identificación Tributaria (NIT)</option>
                </select>
            </div>

            <div class="form-group">
                <label for="identificationNumber">Número de Documento</label>
                <input type="text" id="identificationNumber" formControlName="identificationNumber" placeholder="Número de documento" />
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="sex">Sexo</label>
                <select formControlName="sex" id="sex">
                    <option value="" disabled selected>Seleccione el sexo</option>
                    <option value="femenino">Femenino</option>
                    <option value="masculino">Masculino</option>
                </select>
            </div>

            <div class="form-group">
                <label for="birthDate">Fecha de Nacimiento</label>
                <input type="date" id="birthDate" formControlName="birthDate" />
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="email">Correo Electrónico</label>
                <input type="email" id="email" formControlName="email" placeholder="Correo electrónico" />
            </div>

            <div class="form-group">
                <label for="phoneNumber">Número Telefónico</label>
                <input type="text" id="phoneNumber" formControlName="phoneNumber" placeholder="Número telefónico" />
            </div>
        </div>

        <!-- Campos Adicionales -->
        <div class="form-row">
            <div class="form-group">
                <label for="deathDate">Fecha de Fallecimiento</label>
                <input type="date" id="deathDate" formControlName="deathDate" />
            </div>

            <div class="form-group">
                <label for="economicStatus">Estado Económico</label>
                <select formControlName="economicStatus" id="economicStatus">
                    <option value="" disabled selected>Seleccione una opción</option>
                    <option value="uno">1</option>
                    <option value="dos">2</option>
                    <option value="tres">3</option>
                    <option value="cuatro">4</option>
                    <option value="cinco">5</option>
                    <option value="seis">6</option>
                </select>
            </div>

            <div class="form-group">
                <label for="maritalStatus">Estado Civil</label>
                <select formControlName="maritalStatus" id="maritalStatus">
                    <option value="" disabled selected>Seleccione una opción</option>
                    <option value="soltero">Soltero</option>
                    <option value="casado">Casado</option>
                    <option value="viudo">Viudo</option>
                    <option value="divorciado">Divorciado</option>
                </select>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="hometown">Ciudad Natal</label>
                <input type="text" id="hometown" formControlName="hometown" placeholder="Ciudad de nacimiento" />
            </div>

            <div class="form-group">
                <label for="currentCity">Ciudad Actual</label>
                <input type="text" id="currentCity" formControlName="currentCity" placeholder="Ciudad actual" />
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="firstCrisisDate">Fecha de Primera Crisis</label>
                <input type="date" id="firstCrisisDate" formControlName="firstCrisisDate" />
                <small *ngIf="formPaciente.get('firstCrisisDate')?.touched && formPaciente.get('firstCrisisDate')?.invalid">
                    Este campo es obligatorio.
                </small>
            </div>

            <div class="form-group">
                <label for="crisisStatus">Estado de Crisis</label>
                <input type="text" id="crisisStatus" formControlName="crisisStatus" placeholder="Estado de crisis" />
                <small *ngIf="formPaciente.get('crisisStatus')?.touched && formPaciente.get('crisisStatus')?.invalid">
                    Este campo es obligatorio.
                </small>
            </div>
        </div>

        <!-- Consentimiento Informado -->
        <div class="form-group">
            <input type="checkbox" formControlName="consentimiento" />
            <label for="consentimiento">Acepto el consentimiento informado</label>
        </div>

        <div class="form-group">
            <button type="button" class="btn btn-primary" (click)="onConsentimiento()">Ver Consentimiento Informado</button>
        </div>

        <!-- Firma Digital -->
        <div *ngIf="mostrarConsentimiento" class="modal">
            <div class="modal-content">
                <h2>Consentimiento Informado</h2>
                <p>Aquí va el contenido legal del consentimiento informado...</p>
                <canvas #signatureCanvas width="400" height="100" style="border:1px solid #000;"></canvas>
                <button (click)="clearSignature()" class="btn btn-secondary">Borrar Firma</button>
                <button (click)="saveSignature()" class="btn btn-primary">Aceptar y Guardar</button>
                <button (click)="mostrarConsentimiento = false" class="btn btn-danger">Cancelar</button>
            </div>
        </div>

        <div class="form-group">
            <button type="button" class="btn btn-primary" (click)="onDatosClinicos()" [disabled]="!formPaciente.get('consentimiento')?.value">
                Ingresar Datos Clínicos
            </button>
        </div>

        <button type="submit" class="btn btn-success" [disabled]="formPaciente.invalid">Registrar</button>
    </form>
</div>
