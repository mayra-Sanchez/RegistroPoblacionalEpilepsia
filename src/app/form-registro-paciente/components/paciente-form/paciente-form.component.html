<form [formGroup]="form" class="form-step" (ngSubmit)="onSubmit()">
    <h2 class="form-title">
        <i class="fas fa-user-circle"></i> Datos del Paciente
    </h2>

    <!-- Primera fila -->
    <div class="form-row">
        <div class="form-group">
            <label for="name">Nombre Completo</label>
            <input type="text" id="name" formControlName="name" placeholder="Ej: Juan Pérez García">
            <small *ngIf="form.get('name')?.touched && form.get('name')?.invalid" class="error-message">
                Este campo es obligatorio
            </small>
        </div>

        <div class="form-group">
            <label for="identificationType">Tipo de Documento</label>
            <select formControlName="identificationType" id="identificationType">
                <option value="" disabled selected>Seleccione...</option>
                <option value="cc">Cédula de Ciudadanía</option>
                <option value="ti">Tarjeta de Identidad</option>
                <option value="ce">Cédula de Extranjería</option>
                <option value="pa">Pasaporte</option>
            </select>
            <small *ngIf="form.get('identificationType')?.touched && form.get('identificationType')?.invalid" class="error-message">
                Seleccione un tipo de documento
            </small>
        </div>

        <div class="form-group">
            <label for="identificationNumber">Número de Documento</label>
            <input type="text" id="identificationNumber" formControlName="identificationNumber" placeholder="Ej: 123456789">
            <small *ngIf="form.get('identificationNumber')?.touched && form.get('identificationNumber')?.errors?.['required']" class="error-message">
                Este campo es obligatorio
            </small>
            <small *ngIf="form.get('identificationNumber')?.touched && form.get('identificationNumber')?.errors?.['pattern']" class="error-message">
                Solo se permiten números
            </small>
        </div>
    </div>

    <!-- Segunda fila -->
    <div class="form-row">
        <div class="form-group">
            <label for="sex">Sexo</label>
            <select formControlName="sex" id="sex">
                <option value="" disabled selected>Seleccione...</option>
                <option value="masculino">Masculino</option>
                <option value="femenino">Femenino</option>
                <option value="otro">Otro</option>
            </select>
            <small *ngIf="form.get('sex')?.touched && form.get('sex')?.invalid" class="error-message">
                Seleccione una opción
            </small>
        </div>

        <div class="form-group">
            <label for="birthDate">Fecha de Nacimiento</label>
            <input type="date" id="birthDate" formControlName="birthDate">
            <small *ngIf="form.get('birthDate')?.touched && form.get('birthDate')?.invalid" class="error-message">
                Ingrese una fecha válida
            </small>
        </div>

        <div class="form-group">
            <label for="deathDate">Fecha de Fallecimiento (opcional)</label>
            <input type="date" id="deathDate" formControlName="deathDate">
        </div>
    </div>

    <!-- Tercera fila -->
    <div class="form-row">
        <div class="form-group">
            <label for="email">Correo Electrónico</label>
            <input type="email" id="email" formControlName="email" placeholder="ejemplo@dominio.com">
            <small *ngIf="form.get('email')?.touched && form.get('email')?.errors?.['required']" class="error-message">
                Este campo es obligatorio
            </small>
            <small *ngIf="form.get('email')?.touched && form.get('email')?.errors?.['email']" class="error-message">
                Ingrese un email válido
            </small>
        </div>

        <div class="form-group">
            <label for="phoneNumber">Teléfono</label>
            <input type="tel" id="phoneNumber" formControlName="phoneNumber" placeholder="Ej: 3001234567">
            <small *ngIf="form.get('phoneNumber')?.touched && form.get('phoneNumber')?.errors?.['required']" class="error-message">
                Este campo es obligatorio
            </small>
            <small *ngIf="form.get('phoneNumber')?.touched && form.get('phoneNumber')?.errors?.['pattern']" class="error-message">
                Solo números permitidos
            </small>
        </div>

        <div class="form-group">
            <label for="economicStatus">Nivel Socioeconómico</label>
            <select formControlName="economicStatus" id="economicStatus">
                <option value="" disabled selected>Seleccione...</option>
                <option value="bajo">Bajo</option>
                <option value="medio_bajo">Medio bajo</option>
                <option value="medio">Medio</option>
                <option value="medio_alto">Medio alto</option>
                <option value="alto">Alto</option>
            </select>
            <small *ngIf="form.get('economicStatus')?.touched && form.get('economicStatus')?.invalid" class="error-message">
                Seleccione una opción
            </small>
        </div>
    </div>

    <!-- Cuarta fila -->
    <div class="form-row">
        <div class="form-group">
            <label for="educationLevel">Nivel Educativo</label>
            <select formControlName="educationLevel" id="educationLevel">
                <option value="" disabled selected>Seleccione...</option>
                <option value="primaria">Primaria</option>
                <option value="secundaria">Secundaria</option>
                <option value="tecnico">Técnico/Tecnólogo</option>
                <option value="universitario">Universitario</option>
                <option value="postgrado">Postgrado</option>
            </select>
            <small *ngIf="form.get('educationLevel')?.touched && form.get('educationLevel')?.invalid" class="error-message">
                Seleccione una opción
            </small>
        </div>

        <div class="form-group">
            <label for="maritalStatus">Estado Civil</label>
            <select formControlName="maritalStatus" id="maritalStatus">
                <option value="" disabled selected>Seleccione...</option>
                <option value="soltero">Soltero/a</option>
                <option value="casado">Casado/a</option>
                <option value="divorciado">Divorciado/a</option>
                <option value="viudo">Viudo/a</option>
                <option value="union_libre">Unión libre</option>
            </select>
            <small *ngIf="form.get('maritalStatus')?.touched && form.get('maritalStatus')?.invalid" class="error-message">
                Seleccione una opción
            </small>
        </div>

        <div class="form-group">
            <label for="hometown">Ciudad de Origen</label>
            <input type="text" id="hometown" formControlName="hometown" placeholder="Ej: Bogotá">
            <small *ngIf="form.get('hometown')?.touched && form.get('hometown')?.invalid" class="error-message">
                Este campo es obligatorio
            </small>
        </div>
    </div>

    <!-- Quinta fila -->
    <div class="form-row">
        <div class="form-group">
            <label for="currentCity">Ciudad Actual</label>
            <input type="text" id="currentCity" formControlName="currentCity" placeholder="Ej: Medellín">
            <small *ngIf="form.get('currentCity')?.touched && form.get('currentCity')?.invalid" class="error-message">
                Este campo es obligatorio
            </small>
        </div>

        <div class="form-group">
            <label for="firstCrisisDate">Fecha de Primera Crisis</label>
            <input type="date" id="firstCrisisDate" formControlName="firstCrisisDate">
            <small *ngIf="form.get('firstCrisisDate')?.touched && form.get('firstCrisisDate')?.invalid" class="error-message">
                Ingrese una fecha válida
            </small>
        </div>

        <div class="form-group">
            <label for="crisisStatus">Estado de Crisis</label>
            <select formControlName="crisisStatus" id="crisisStatus" class="form-input">
              <option value="" disabled selected>Seleccione el estado...</option>
              <option *ngFor="let estado of estadosCrisis" [value]="estado">
                {{ estado }}
              </option>
            </select>
            <small *ngIf="form.get('crisisStatus')?.touched && form.get('crisisStatus')?.invalid" class="error-message">
              Seleccione un estado de crisis
            </small>
          </div>
    </div>

    <!-- Sexta fila - Checkboxes -->
    <div class="form-row">
        <div class="form-group checkbox-container">
            <label class="checkbox-label">
                <input type="checkbox" formControlName="tieneCuidador" id="tieneCuidador">
                ¿El paciente tiene cuidador?
            </label>
        </div>
    </div>

    <!-- Botón de envío -->
    <div class="form-actions">
        <button type="submit" class="btn btn-next" [disabled]="form.invalid">
            Siguiente <i class="fas fa-arrow-right"></i>
        </button>
    </div>
</form>